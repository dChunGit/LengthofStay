{% extends 'base.html' %}
{% block title %}
Home Page
{% endblock %}
{% block content %}


<div class="d-flex justify-content-between">
    <h1>Welcome, {{user.name}}</h1>
</div>
<hr style=" display: block;
  margin-top:1em;
  margin-bottom: 1em;
  margin-left: auto;
  margin-right: auto;
  border-width: 6px;"/>
<div class="d-flex justify-content-between">
    <h3>Your Recent Reports</h3>
</div>
<br>
<div class="d-flex align-items-center">
    {% for report in report_list %}
    <div class="col-sm-4 mb-3">
        <div class="card">
            <div class="d-flex card-header justify-content-between">
                <h4>{{ report.get_report_event().title }}</h4>
                {% if report.report_image %}
                    <img height="10%" width="10%"
                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/VisualEditor_icon_image-thumbnail.svg/240px-VisualEditor_icon_image-thumbnail.svg.png" >
                {% endif %}
            </div>
            <div class="card-body">
                <p class="font-italic"><font size="2">{{report.comments}}</font></p>
            </div>
            <div class="card-footer">
                <p class="text-muted"><font size="2">Time: {{report.time.strftime('%Y-%m-%d %H:%M')}}</font></p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<div class="d-flex flex-row-reverse">
    <a class="btn btn-primary" href="{{ url_for('home_all_reports')}}" role="button">View All Reports</a>
</div>

</div>
<hr style=" display: block;
  margin-top:1em;
  margin-bottom: 1em;
  margin-left: auto;
  margin-right: auto;
  border-width: 6px;"/>
<div class="d-flex justify-content-between">
    <h3>Your Subscribed Events</h3>
</div>
<br>
<div class="row ">
    {% for event in event_list %}
    <div class="col-sm-4 mb-3">
        <div class="card">
            {% if event.time < event.time.now() %}
            <img class="card-img-top" height="80" width="50"
                 src="http://www.sikhvolunteersaustralia.org/wp-content/uploads/2015/07/past-events-960x2501.jpg">
            {% else %}
            <img class="card-img-top" height="80" width="50"
                 src="http://lighthouse.church/wp-content/uploads/2015/03/eventsheader.jpg">
            {% endif %}
            <div class="card-body">
                <h5 class="card-title"><a href="{{ url_for('view_single_event', event_id=event.id) }}" style="color: black;">{{event.title}}</a></h5>
                <p class="font-italic"><font size="2">{{event.description}}</font></p>
                <p class="font-italic"><font size="2">Time: {{event.time.strftime('%Y-%m-%d %H:%M')}}</font></p>
                <p class="font-italic"><font size="2">Location: {{event.location}}</font></p>
            </div>
            <div class="card-footer">
                <p class="text-muted"><font size="1">Last updated time: {{event.last_updated_time.strftime('%Y-%m-%d
                    %H:%M')}}</font></p>
                <form action="{{ url_for('subscribe_event', event_id=event.id, next_url='home') }}" method="post">
                    <button type="submit" class="btn btn-primary btn-sm" name="subscribe_status" value="Unsubscribe">
                        Unsubscribe
                    </button>
                </form>
            </div>
        </div>
    </div>

    {% endfor %}
</div>
{% endblock %}